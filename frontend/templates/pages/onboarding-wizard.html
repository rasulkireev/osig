{% extends "base.html" %}
{% load webpack_loader static %}

{% block content %}
<div class="container px-4 py-8 mx-auto">
  <div class="mx-auto max-w-3xl" data-controller="onboarding-wizard">
    <h1 class="mb-3 text-3xl font-bold text-center">OG Image Onboarding Wizard</h1>
    <p class="mb-8 text-center text-gray-600">Go from blank form to publish-ready OG meta tags in 5 steps.</p>

    <form data-onboarding-wizard-target="wizardForm" class="space-y-6" novalidate>
      <section data-onboarding-wizard-target="step" class="space-y-4">
        <h2 class="text-xl font-semibold">Step 1 · Content destination</h2>
        <div>
          <label for="page_url" class="block mb-1 text-sm font-medium text-gray-700">Canonical page URL</label>
          <input id="page_url" data-onboarding-wizard-target="pageUrl" type="url" placeholder="https://example.com/job-offer" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
        </div>
        <div class="flex justify-end">
          <button type="button" data-action="onboarding-wizard#goNext" class="px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Next</button>
        </div>
      </section>

      <section data-onboarding-wizard-target="step" class="hidden space-y-4">
        <h2 class="text-xl font-semibold">Step 2 · Core OG copy</h2>
        <div>
          <label for="title" class="block mb-1 text-sm font-medium text-gray-700">Title</label>
          <input id="title" data-onboarding-wizard-target="title" type="text" placeholder="Hiring: Senior Backend Engineer" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
        </div>
        <div>
          <label for="subtitle" class="block mb-1 text-sm font-medium text-gray-700">Subtitle</label>
          <textarea id="subtitle" data-onboarding-wizard-target="subtitle" rows="3" placeholder="Build reliable services with Django + Postgres." class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>
        <div>
          <label for="eyebrow" class="block mb-1 text-sm font-medium text-gray-700">Eyebrow</label>
          <input id="eyebrow" data-onboarding-wizard-target="eyebrow" type="text" placeholder="Remote · Full-time" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
        </div>
        <div class="flex justify-between">
          <button type="button" data-action="onboarding-wizard#goPrevious" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">Back</button>
          <button type="button" data-action="onboarding-wizard#goNext" class="px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Next</button>
        </div>
      </section>

      <section data-onboarding-wizard-target="step" class="hidden space-y-4">
        <h2 class="text-xl font-semibold">Step 3 · Image & template</h2>
        <div>
          <label for="site" class="block mb-1 text-sm font-medium text-gray-700">Social image size</label>
          <select id="site" data-onboarding-wizard-target="site" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
            <option value="x">X / Twitter (1600 x 900)</option>
            <option value="meta">Meta (1200 x 630)</option>
          </select>
        </div>
        <div>
          <label for="style" class="block mb-1 text-sm font-medium text-gray-700">Style</label>
          <select id="style" data-onboarding-wizard-target="style" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
            <option value="base">Base</option>
            <option value="logo">Logo</option>
            <option value="job_classic">Job Classic</option>
            <option value="job_logo">Job Logo</option>
            <option value="job_clean">Job Clean</option>
          </select>
        </div>
        <div>
          <label for="font" class="block mb-1 text-sm font-medium text-gray-700">Font</label>
          <select id="font" data-onboarding-wizard-target="font" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
            <option value="helvetica">Helvetica</option>
            <option value="markerfelt">Marker Felt</option>
            <option value="papyrus">Papyrus</option>
          </select>
        </div>
        <div>
          <label for="image_url" class="block mb-1 text-sm font-medium text-gray-700">Image / logo URL</label>
          <input id="image_url" data-onboarding-wizard-target="imageUrl" type="url" placeholder="https://example.com/logo-or-cover.png" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
          <p class="mt-1 text-sm text-gray-500">For job styles you can pass a logo or brand image in this field.</p>
        </div>
        <div class="flex justify-between">
          <button type="button" data-action="onboarding-wizard#goPrevious" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">Back</button>
          <button type="button" data-action="onboarding-wizard#goNext" class="px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Next</button>
        </div>
      </section>

      <section data-onboarding-wizard-target="step" class="hidden space-y-4">
        <h2 class="text-xl font-semibold">Step 4 · Output controls</h2>
        <div>
          <label for="format" class="block mb-1 text-sm font-medium text-gray-700">Output format</label>
          <select id="format" data-onboarding-wizard-target="format" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
            <option value="png">PNG</option>
            <option value="jpeg">JPEG</option>
          </select>
        </div>
        <div>
          <label for="quality" class="block mb-1 text-sm font-medium text-gray-700">JPEG quality (1-100)</label>
          <input id="quality" data-onboarding-wizard-target="quality" type="number" min="1" max="100" placeholder="85" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
          <p class="mt-1 text-sm text-gray-500">Only used when format = JPEG. Leave blank to use default quality.</p>
        </div>
        <div>
          <label for="max_kb" class="block mb-1 text-sm font-medium text-gray-700">Max KB (optional)</label>
          <input id="max_kb" data-onboarding-wizard-target="maxKb" type="number" min="1" placeholder="0" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
          <p class="mt-1 text-sm text-gray-500">Optional size target for signed image generation.</p>
        </div>
        <div>
          <label for="version" class="block mb-1 text-sm font-medium text-gray-700">Cache version</label>
          <input id="version" data-onboarding-wizard-target="version" type="text" placeholder="e.g. v2026" class="px-3 py-2 w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" />
          <p class="mt-1 text-sm text-gray-500">Update this value when source content changes to bust cached image URLs.</p>
        </div>
        <div class="flex justify-between">
          <button type="button" data-action="onboarding-wizard#goPrevious" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">Back</button>
          <button type="button" data-action="onboarding-wizard#goNext" class="px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Next</button>
        </div>
      </section>

      <section data-onboarding-wizard-target="step" class="hidden space-y-4">
        <h2 class="text-xl font-semibold">Step 5 · Generate</h2>
        <p class="text-sm text-gray-600">Sign your image URL, get ready-to-copy OG tags, and open validator links.</p>

        <button type="button" data-action="onboarding-wizard#generate" class="px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Generate OG meta</button>

        <div class="mt-2">
          <label for="meta_tags" class="block mb-1 text-sm font-medium text-gray-700">Copy-ready meta tags</label>
          <textarea id="meta_tags" data-onboarding-wizard-target="metaTags" rows="12" readonly class="px-3 py-2 w-full rounded-md border border-gray-200 bg-gray-50 font-mono text-sm" placeholder="Generated tags will appear here"></textarea>
          <div class="mt-3 flex gap-2">
            <button type="button" data-action="onboarding-wizard#copyMetaTags" class="px-4 py-2 text-white bg-gray-800 rounded-md hover:bg-gray-900">Copy</button>
            <a href="#" data-onboarding-wizard-target="previewLink" target="_blank" rel="noopener" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100">Preview image</a>
          </div>
        </div>

        <div>
          <h3 class="mb-2 text-sm font-semibold text-gray-700">Validation checklist</h3>
          <div data-onboarding-wizard-target="validationLinks" class="space-y-2"></div>
        </div>

        <p data-onboarding-wizard-target="errorMessage" class="text-sm text-red-600"></p>

        <div class="flex justify-between">
          <button type="button" data-action="onboarding-wizard#goPrevious" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">Back</button>
          <button type="button" data-action="onboarding-wizard#reset" class="px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700">Start over</button>
        </div>
      </section>
    </form>
  </div>
</div>
{% endblock content %}
